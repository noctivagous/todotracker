<calcite-card class="tt-todo-item todo-item {{:status}}" style="margin-left: {{:indent}}px; margin-bottom: 12px;">
  <div slot="title" class="flex items-start justify-between gap-2">
    <div class="flex-1">
      <div class="flex items-center flex-wrap gap-1.5 mb-2">
        <span class="tt-todo-title-display text-lg font-semibold">{{:title}}</span>
        <span class="text-xs text-color-3">#{{:id}}</span>
        <calcite-chip appearance="solid" scale="s" class="status-{{:status}}">
          {{:~replaceUnderscores(status)}}
        </calcite-chip>
        <calcite-chip appearance="outline" scale="s" class="category-{{:category}}">
          {{:category}}
        </calcite-chip>
        {{if queue && queue > 0}}
          <calcite-chip appearance="solid" color="blue" scale="s">â¯ï¸ Queue {{:queue}}</calcite-chip>
        {{/if}}
        {{if priority_class}}
          <calcite-chip appearance="solid" color="orange" scale="s">ğŸ”º Priority {{:priority_class}}</calcite-chip>
        {{/if}}
        {{if task_size}}
          <calcite-chip appearance="outline" scale="s">ğŸ“ Size {{:task_size}}/5</calcite-chip>
        {{/if}}
        {{if topic}}
          <calcite-chip appearance="outline" scale="s">ğŸ“ {{:topic}}</calcite-chip>
        {{/if}}
        {{for tags}}
          <calcite-chip appearance="outline" scale="s">ğŸ·ï¸ {{:name || #data}}</calcite-chip>
        {{/for}}
      </div>
    </div>
    <div class="flex gap-1.5">
      <calcite-button onclick="router.navigate('/todo/{{:id}}')" appearance="outline" scale="s">
        View
      </calcite-button>
      <calcite-button onclick="deleteTodo({{:id}})" appearance="solid" kind="danger" scale="s">
        Delete
      </calcite-button>
    </div>
  </div>
  <div class="space-y-3">
    {{if description}}
      <div>
        <strong class="text-sm mb-1 block">Description:</strong>
        <div class="markdown-render text-sm text-color-2">{{:description}}</div>
      </div>
    {{/if}}
    {{if work_completed || work_remaining || implementation_issues}}
      <div class="border-t border-color-3 pt-3">
        <strong class="text-sm mb-2 block">Progress:</strong>
        {{if work_completed}}
          <div class="mb-3">
            <strong class="text-sm">âœ… Work Completed:</strong>
            <div class="markdown-render text-sm text-color-2 mt-1">{{:work_completed}}</div>
          </div>
        {{/if}}
        {{if work_remaining}}
          <div class="mb-3">
            <strong class="text-sm">ğŸ“‹ Work Remaining:</strong>
            <div class="markdown-render text-sm text-color-2 mt-1">{{:work_remaining}}</div>
          </div>
        {{/if}}
        {{if implementation_issues}}
          <div class="mb-3">
            <strong class="text-sm">âš ï¸ Implementation Issues:</strong>
            <div class="markdown-render text-sm text-color-2 mt-1">{{:implementation_issues}}</div>
          </div>
        {{/if}}
      </div>
    {{/if}}
    <div class="text-xs text-color-3 border-t border-color-3 pt-2">
      Created: {{:~formatDate(created_at)}}
      {{if updated_at && updated_at !== created_at}} | Updated: {{:~formatDate(updated_at)}} {{/if}}
    </div>
  </div>
</calcite-card>
{{for children}}
  {{:~renderTodoItem(#data, indent + 24)}}
{{/for}}

