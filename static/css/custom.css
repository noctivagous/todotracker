/* Custom styles for TodoTracker using Calcite Design Tokens */

/* Brand adjustments (user requested) */
:root {
    --calcite-color-brand: #224559;
}

/* Apply button internal background baseline (user requested) */
calcite-button {
    --calcite-internal-button-background-color: #3b505d;
}

/* -------------------------------------------------------------------------- */
/* Make Calcite controls feel like "application UI" (clear affordances)        */
/* - crisp 1px (non-blurred) shadows                                          */
/* - stronger separation between text and controls                             */
/* -------------------------------------------------------------------------- */

:root {
    --tt-crisp-shadow: 0 1px 0 0 rgba(0, 0, 0, 0.18);
}

body.calcite-mode-dark {
    --tt-crisp-shadow: 0 1px 0 0 rgba(0, 0, 0, 0.55);
}

/* Buttons: default raised feel (except fully transparent icon buttons) */
calcite-button {
    --calcite-button-shadow: var(--tt-crisp-shadow);
}

calcite-button[appearance="transparent"] {
    --calcite-button-shadow: var(--calcite-shadow-none);
}

/* Segmented control: crisp separation so it reads like tabs/buttons */
calcite-segmented-control-item {
    --calcite-segmented-control-shadow: var(--tt-crisp-shadow);
}

/* Inputs/selects/textareas: add crisp shadow and make them feel "field-like" */
calcite-input,
calcite-select,
calcite-text-area {
    --calcite-input-shadow: var(--tt-crisp-shadow);
    --calcite-input-corner-radius: var(--calcite-corner-radius-md);
}

/* Todo title should be bold everywhere (display + input fields) */
#titleInput,
calcite-input.tt-title-input,
calcite-input[data-role="titleInput"],
calcite-input-text[data-role="titleInput"] {
    /*
     * Calcite inputs are shadow-DOM components; you generally can't style the internal <input>
     * directly unless a CSS variable exists for the thing you want to change.
     *
     * The internal input uses Calcite's `font-normal` utility, which resolves to
     * `--calcite-font-weight-normal`. Overriding that token *on the component host*
     * makes the internal field render bold without reaching into shadow DOM.
     */
    --calcite-font-weight-normal: var(--calcite-font-weight-bold) !important;

    /* Keep prefix/suffix text aligned if present (they use --calcite-font-weight-regular). */
    --calcite-font-weight-regular: var(--calcite-font-weight-bold) !important;

    /* Text color hooks differ slightly between calcite-input and calcite-input-text. */
    --calcite-input-text-color: var(--calcite-color-text-1);
    --calcite-input-text-text-color: var(--calcite-color-text-1);
    --calcite-input-text-text-color-focus: var(--calcite-color-text-1);
}

.tt-title-display,
.tt-todo-title-display {
    font-weight: var(--calcite-font-weight-bold);
}

/* Main grid + list listings: bold title for clear hierarchy/affordance */
.tt-main-todo-title {
    font-weight: var(--calcite-font-weight-bold);
    color: var(--calcite-color-text-1);
}

.tt-todo-grid-card {
    position: relative;
}

.tt-card-group {
    width: 100%;
    /* Slightly roomier than the Calcite default (md) for our dense cards. */
    --calcite-card-group-space: var(--calcite-spacing-lg);
}

/* Card Group uses a wrapping flex container; define card sizing so grid view forms columns. */
calcite-card.tt-todo-grid-card,
calcite-card.tt-note-card {
    flex: 1 1 22rem;
    max-width: 28rem;
}

@media (max-width: 768px) {
    calcite-card.tt-todo-grid-card,
    calcite-card.tt-note-card {
        flex-basis: 100%;
        max-width: 100%;
    }
}

.tt-subtasks-badge {
    position: absolute;
    inset-inline-end: var(--calcite-spacing-md);
    inset-block-end: var(--calcite-spacing-md);
}

.tt-subtasks-preview {
    border-top: 1px solid var(--calcite-color-border-2);
    padding-top: var(--calcite-spacing-sm);
}

.tt-subtasks-panel {
    /* Give extra separation from neighboring panels (e.g., Attachments). */
    margin-top: var(--calcite-spacing-lg);
    display: block;
}

.tt-subtasks-preview-title {
    margin-bottom: var(--calcite-spacing-xxs);
}

.tt-subtask-line {
    font-size: 0.8125rem;
    line-height: 1.2rem;
}

.tt-subtask-more {
    margin-top: var(--calcite-spacing-xxs);
    font-size: 0.75rem;
    color: var(--calcite-color-text-3);
}

.tt-table-title {
    display: inline-block;
}

.tt-main-list-content {
    display: flex;
    flex-direction: column;
    gap: var(--calcite-spacing-xxs);
}

/* Ensure body background color adapts to theme */
body {
    background-color: var(--calcite-color-background);
}

body.calcite-mode-dark {
    background-color: var(--calcite-color-background);
}

/* Ensure Calcite Shell provides proper spacing and doesn't touch viewport */
calcite-shell {
    --calcite-shell-border-color: var(--calcite-color-border-1);
    height: 100vh;
    width: 100vw;
}

/* Ensure main content area has proper spacing */
calcite-shell main {
    /* Padding is handled by view containers; keep shell content flush. */
    padding: 0;
    overflow-y: auto;
}

/* -------------------------------------------------------------------------- */
/* Minimal utility classes used by SPA templates (Calcite-token based)         */
/* -------------------------------------------------------------------------- */

.flex { display: flex; }
.grid { display: grid; }
.block { display: block; }
.inline-block { display: inline-block; }
.flex-1 { flex: 1 1 0%; }
.flex-wrap { flex-wrap: wrap; }
.min-w-0 { min-width: 0; }

.items-center { align-items: center; }
.items-start { align-items: flex-start; }
.justify-between { justify-content: space-between; }
.justify-center { justify-content: center; }

.gap-1\.5 { gap: var(--calcite-spacing-sm); }
.gap-2 { gap: var(--calcite-spacing-sm); }
.gap-3 { gap: var(--calcite-spacing-md); }
.gap-4 { gap: var(--calcite-spacing-lg); }

.space-y-2 > * + * { margin-top: var(--calcite-spacing-sm); }
.space-y-3 > * + * { margin-top: var(--calcite-spacing-md); }
.space-y-4 > * + * { margin-top: var(--calcite-spacing-lg); }

.p-3 { padding: var(--calcite-spacing-md); }
.p-4 { padding: var(--calcite-spacing-lg); }
.p-6 { padding: var(--calcite-spacing-xl); }

.pt-2 { padding-top: var(--calcite-spacing-sm); }
.pt-3 { padding-top: var(--calcite-spacing-md); }
.py-4 { padding-top: var(--calcite-spacing-lg); padding-bottom: var(--calcite-spacing-lg); }
.py-12 { padding-top: calc(var(--calcite-spacing-xxl) * 2); padding-bottom: calc(var(--calcite-spacing-xxl) * 2); }

.mb-1 { margin-bottom: var(--calcite-spacing-xxs); }
.mb-2 { margin-bottom: var(--calcite-spacing-sm); }
.mb-3 { margin-bottom: var(--calcite-spacing-md); }
.mb-4 { margin-bottom: var(--calcite-spacing-lg); }
.mb-6 { margin-bottom: var(--calcite-spacing-xl); }
.mb-8 { margin-bottom: var(--calcite-spacing-xxl); }

.mt-1 { margin-top: var(--calcite-spacing-xxs); }
.mt-2 { margin-top: var(--calcite-spacing-sm); }
.mt-6 { margin-top: var(--calcite-spacing-xl); }

.text-center { text-align: center; }
.underline { text-decoration: underline; }
.cursor-pointer { cursor: pointer; }

.font-medium { font-weight: 500; }
.font-semibold { font-weight: 600; }
.font-bold { font-weight: 700; }

.text-xs { font-size: 0.75rem; line-height: 1rem; }
.text-sm { font-size: 0.875rem; line-height: 1.25rem; }
.text-lg { font-size: 1.125rem; line-height: 1.5rem; }
.text-xl { font-size: 1.25rem; line-height: 1.75rem; }
.text-2xl { font-size: 1.5rem; line-height: 2rem; }
.text-3xl { font-size: 1.875rem; line-height: 2.25rem; }

.truncate {
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
}

.border-t { border-top-width: 1px; border-top-style: solid; }
.border-color-1 { border-color: var(--calcite-color-border-1); }
.border-color-2 { border-color: var(--calcite-color-border-2); }
.border-color-3 { border-color: var(--calcite-color-border-3); }

.text-color-1 { color: var(--calcite-color-text-1); }
.text-color-2 { color: var(--calcite-color-text-2); }
.text-color-3 { color: var(--calcite-color-text-3); }
.text-color-danger { color: var(--calcite-color-status-danger); }
.text-muted-foreground { color: var(--calcite-color-text-2); }

/* Basic grid helpers used in templates */
.grid-cols-1 { grid-template-columns: repeat(1, minmax(0, 1fr)); }
.grid-cols-2 { grid-template-columns: repeat(2, minmax(0, 1fr)); }

@media (min-width: 768px) {
    .md\:grid-cols-3 { grid-template-columns: repeat(3, minmax(0, 1fr)); }
    .md\:grid-cols-4 { grid-template-columns: repeat(4, minmax(0, 1fr)); }
}

/* -------------------------------------------------------------------------- */
/* Todo Detail Page: Consistent Section Spacing                              */
/* -------------------------------------------------------------------------- */

/* Standardize spacing between major sections in todo detail */
.tt-todo-detail-root > * + * {
  margin-top: var(--calcite-spacing-lg) !important;
}

/* Ensure panels have consistent spacing */
.tt-todo-detail-root calcite-panel,
.tt-todo-detail-root calcite-card:not(:first-child) {
  margin-top: var(--calcite-spacing-lg) !important;
}

/* Progress fields section should have consistent spacing */
.tt-todo-detail-root .grid.grid-cols-1.md\\:grid-cols-3 {
  margin-top: var(--calcite-spacing-lg) !important;
}

/* Description section spacing */
.tt-todo-detail-root > div:has(.markdown-render) {
  margin-bottom: var(--calcite-spacing-lg) !important;
}

/* Increase spacing between title input and description */
.tt-todo-detail-root calcite-card [slot="title"] span:has(calcite-label) {
  margin-top: var(--calcite-spacing-md) !important;
}

/* Alternative: target the description label specifically */
.tt-todo-detail-root calcite-card [slot="title"] calcite-label:has(tt-md-editor[data-tt-field="description"]) {
  margin-top: var(--calcite-spacing-md) !important;
}

/* -------------------------------------------------------------------------- */
/* SPA-specific polish                                                        */
/* -------------------------------------------------------------------------- */

/* Layout width mode (Settings) */
.tt-layout-maxwidth .tt-content-container {
    max-width: var(--tt-layout-maxwidth, 1100px);
    margin-inline: auto;
}

/* In max-width mode, constrain the entire Calcite shell (header + panels + main) */
.tt-layout-maxwidth calcite-shell {
    width: 100%;
    max-width: var(--tt-layout-maxwidth, 1100px);
    margin-inline: auto;
}

/* Note: calcite-shell inherits dark mode from body via Calcite's theme system automatically */

/* Settings: content width controls */
.tt-settings-width-controls {
    display: inline-flex;
    align-items: center;
    gap: var(--calcite-spacing-sm);
}

.tt-settings-width-slider {
    width: 200px;
}

/* Settings page */
.tt-settings-page calcite-panel {
    --calcite-panel-space: var(--calcite-spacing-md);
}

/* Navigation layout helpers (Calcite slots do most of the work; these are small tweaks). */
.tt-nav-actions {
    display: flex;
    align-items: center;
    gap: var(--calcite-spacing-md);
    flex-wrap: wrap;
    padding-inline-start: var(--calcite-spacing-md);
}

.tt-nav-secondary {
    display: flex;
    align-items: center;
    gap: var(--calcite-spacing-md);
    flex-wrap: wrap;
    padding-inline-start: var(--calcite-spacing-md);
}

.tt-notes-nav-filters {
    display: flex;
    align-items: center;
    gap: var(--calcite-spacing-md);
    margin-inline-start: auto; /* push Notes filters to the right of search/filter */
    flex-wrap: wrap;
}

.tt-notes-nav-filters calcite-combobox {
    width: 220px;
}

.tt-notes-nav-filters calcite-segmented-control {
    --calcite-segmented-control-shadow: var(--tt-crisp-shadow);
}

tt-md-editor {
    display: block;
}

.tt-md-editor-host {
    /* Let Toast UI editor fill the available width inside Calcite labels/panels */
    width: 100%;
    border-radius: var(--calcite-border-radius);
}

.tt-nav-tabs,
#ttNavTabs,
#ttSpaNavTabs {
    display: flex;
    align-items: center;
    gap: var(--calcite-spacing-sm);
}

.tt-nav-tabs calcite-segmented-control,
#ttSpaNavTabs {
    --calcite-segmented-control-shadow: var(--tt-crisp-shadow);
}

.tt-nav-secondary calcite-input {
    width: 220px;
}

@media (max-width: 768px) {
    .tt-nav-secondary calcite-input {
        width: 160px;
    }

    .tt-notes-nav-filters calcite-combobox {
        width: 160px;
    }
}

.tt-desktop-only { display: inline-flex; }
.tt-mobile-only { display: none; }

@media (max-width: 640px) {
    .tt-desktop-only { display: none !important; }
    .tt-mobile-only { display: inline-flex !important; }

    /* Let header controls stack cleanly on small screens */
    .tt-nav-actions {
        width: 100%;
        gap: var(--calcite-spacing-sm);
        padding-inline-start: var(--calcite-spacing-sm);
    }

    .tt-nav-secondary {
        width: 100%;
        gap: var(--calcite-spacing-sm);
        padding-inline-start: var(--calcite-spacing-sm);
    }

    .tt-nav-secondary calcite-input {
        width: 100%;
        min-width: 0;
    }

    .tt-notes-nav-filters {
        width: 100%;
        margin-inline-start: 0;
    }

    .tt-notes-nav-filters calcite-combobox {
        width: 100%;
        min-width: 0;
    }

    #ttHeaderStatusSelect,
    #ttSpaNavSelect {
        width: 100%;
        min-width: 0;
    }
}

#tt-panel-start,
#tt-panel-end {
    height: 100%;
    overflow: auto;
}

/* Slightly differentiate the non-status "Queue" option inside the status segmented control */
calcite-segmented-control-item.tt-seg-queue {
    --calcite-segmented-control-border-color: var(--calcite-color-border-2);
    --calcite-segmented-control-icon-color: var(--calcite-color-brand);
}

calcite-segmented-control-item.tt-seg-queue[checked] {
    --calcite-segmented-control-background-color: var(--calcite-color-foreground-1);
    --calcite-segmented-control-border-color: var(--calcite-color-brand);
    --calcite-segmented-control-color: var(--calcite-color-brand);
    --calcite-segmented-control-shadow: inset 0 0 0 1px var(--calcite-color-brand);
}

/* Make the master-detail layout feel intentional on desktop (avoid huge empty center) */
#tt-panel-start-shell {
    --calcite-shell-panel-width: 360px;
}

#tt-panel-end-shell {
    --calcite-shell-panel-width: 440px;
}

@media (max-width: 768px) {
    /* On mobile portrait, stack left panel above main content */
    calcite-shell {
        --calcite-shell-content-width: 100%;
    }
    
    /* Make left panel full width and stack above main on mobile */
    /* Use display-mode override or force full width */
    #tt-panel-start-shell {
        --calcite-shell-panel-width: 100% !important;
        --calcite-shell-panel-max-width: 100% !important;
        --calcite-shell-panel-min-width: 100% !important;
        width: 100% !important;
        max-width: 100% !important;
        /* Force it to be a block-level element that stacks */
        position: relative !important;
        display: block !important;
        height: auto !important;
        max-height: 40vh; /* Limit height so main content is visible */
        overflow-y: auto;
        border-bottom: 1px solid var(--calcite-color-border-1);
        /* Remove any flex properties that might keep it inline */
        flex: none !important;
        align-self: stretch !important;
    }
    
    /* Force the shell's internal main container to stack vertically */
    /* Since we can't directly target shadow DOM, we use CSS that affects the shell-panel positioning */
    calcite-shell::part(main),
    calcite-shell .main {
        flex-direction: column !important;
    }
    
    /* Note: Shell's internal layout is modified via JavaScript in app.js to stack vertically on mobile */
    
    /* Hide right panel completely on mobile - it's not needed */
    #tt-panel-end-shell {
        display: none !important;
    }
    
    /* Main content should take full width and be below the panel */
    calcite-shell main,
    #app-content {
        width: 100% !important;
        max-width: 100% !important;
        order: 1;
        flex: 1;
    }
    
    /* Prevent horizontal overflow */
    body {
        overflow-x: hidden;
    }
    
    .tt-content-container {
        width: 100%;
        max-width: 100%;
        padding-inline: var(--calcite-spacing-sm);
        padding-block: var(--calcite-spacing-md);
    }
    
    /* Ensure grid/list views don't overflow on mobile */
    calcite-card-group,
    #ttMainTodosList,
    #ttMainNotesList {
        width: 100%;
        overflow-x: hidden;
    }
    /* Card stacking on mobile is handled via flex-basis rules above. */
    
    /* When minimized on mobile, hide the panel completely */
    #tt-panel-start-shell[data-tt-minimized="true"] {
        display: none !important;
        max-height: 0 !important;
    }
    
    /* Ensure panel content is visible when not minimized */
    #tt-panel-start-shell:not([data-tt-minimized="true"]) {
        display: flex !important;
    }
    
    /* Make sure panel content area is visible */
    #tt-panel-start-shell:not([data-tt-minimized="true"]) #tt-panel-start {
        display: block !important;
        visibility: visible !important;
    }
}

/* Left panel minimize rail (do not mutate list item internals; just hide overflow). */
#tt-panel-start-shell[data-tt-minimized="true"] {
    --calcite-shell-panel-width: 15pt;
    --calcite-shell-panel-min-width: 15pt;
    --calcite-shell-panel-max-width: 15pt;
}

/* On mobile, when minimized, hide the left panel completely and let main content take full width */
@media (max-width: 768px) {
    #tt-panel-start-shell[data-tt-minimized="true"] {
        display: none !important;
    }
    
    /* When left panel is minimized on mobile, main content should take full width */
    calcite-shell:has(#tt-panel-start-shell[data-tt-minimized="true"]) main,
    calcite-shell:has(#tt-panel-start-shell[data-tt-minimized="true"]) #app-content {
        width: 100% !important;
        max-width: 100% !important;
    }
    
    /* Alternative approach if :has() isn't supported - use attribute selector on shell */
    calcite-shell[data-tt-left-panel-minimized="true"] main,
    calcite-shell[data-tt-left-panel-minimized="true"] #app-content {
        width: 100% !important;
        max-width: 100% !important;
    }
}

#tt-panel-start-shell[data-tt-minimized="true"] #tt-panel-start {
    padding: 0;
    overflow: hidden;
}

#tt-panel-start-shell[data-tt-minimized="true"] #ttTodoBrowserList {
    display: none;
}

#tt-panel-start-shell[data-tt-minimized="true"] #ttNotesBrowserList {
    display: none;
}

#tt-panel-start-shell[data-tt-minimized="true"] #ttLeftPanelToggleBtn {
    width: 15pt;
    min-width: 15pt;
    padding: 0;
}

.tt-surface {
    background: var(--calcite-color-foreground-1);
    border: 1px solid var(--calcite-color-border-1);
    border-radius: var(--calcite-corner-radius-md);
}

/* Code/kbd styling for dashboard */
code.tt-surface {
    font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
    font-size: 0.75rem;
    display: inline-block;
}

.status-pending { --calcite-chip-background-color: var(--calcite-color-foreground-2); }
.status-in_progress { --calcite-chip-background-color: var(--calcite-color-status-info); }
.status-completed { --calcite-chip-background-color: var(--calcite-color-status-success); }
.status-cancelled { --calcite-chip-background-color: var(--calcite-color-status-danger); }

/* Status chips: sharp corners + light text tinted by the same hue */
calcite-chip[class^="status-"],
calcite-chip[class*=" status-"] {
    --calcite-chip-corner-radius: 0px;
    /* safe default if color-mix isn't supported */
    --calcite-chip-text-color: var(--calcite-color-text-inverse);
}

/* Provide a hue token per status for tinting text */
.status-pending { --tt-status-hue: var(--calcite-color-text-3); }
.status-in_progress { --tt-status-hue: var(--calcite-color-status-info); }
.status-completed { --tt-status-hue: var(--calcite-color-status-success); }
.status-cancelled { --tt-status-hue: var(--calcite-color-status-danger); }

@supports (color: color-mix(in srgb, white, black)) {
    calcite-chip[class^="status-"]:not(.status-pending),
    calcite-chip[class*=" status-"]:not(.status-pending) {
        /* light, same-hue ink on dark-ish chip fills */
        --calcite-chip-text-color: color-mix(in srgb, var(--tt-status-hue) 18%, white);
    }
}

/* Pending is a light gray chip: text must be darker than the background */
calcite-chip.status-pending {
    --calcite-chip-text-color: var(--calcite-color-text-1);
}

/* Category + topic chips: sharp corners (status already covered above) */
calcite-chip[class^="category-"],
calcite-chip[class*=" category-"],
calcite-chip.tt-topic-chip {
    --calcite-chip-corner-radius: 0px;
}

.category-feature { --calcite-chip-background-color: var(--calcite-color-status-info); }
.category-issue { --calcite-chip-background-color: var(--calcite-color-status-warning); }
.category-bug { --calcite-chip-background-color: var(--calcite-color-status-danger); }

/* Detail view controls */
.tt-title-input {
    /* Calcite scale="l" does most of the work; this nudges toward ~1.5x feel. */
    font-size: 1.5em;
}

.tt-tags-input {
    /* Keep tags visually quieter/denser */
    --calcite-input-font-size: 0.875rem;
}

/* Smooth transitions - scoped to avoid interfering with Calcite components */
.todo-item,
.status-indicator,
.spinner {
    transition: all 0.2s ease-in-out;
}

/* Custom scrollbar using Calcite tokens */
/* Note: Scrollbar width uses fixed 8px for better UX visibility, 
   as Calcite spacing tokens are too small for scrollbars */
::-webkit-scrollbar {
    width: 8px;
}

::-webkit-scrollbar-track {
    background: var(--calcite-color-background);
}

::-webkit-scrollbar-thumb {
    background: var(--calcite-color-border-2);
    border-radius: var(--calcite-corner-radius-sm); /* Use sm (4px) for rounded scrollbar */
}

::-webkit-scrollbar-thumb:hover {
    background: var(--calcite-color-border-3);
}

/* Todo animations using Calcite spacing tokens */
.todo-item:hover {
    transform: translateX(var(--calcite-spacing-xxs)); /* 0.25rem = 4px */
}

/* Status indicators using Calcite color tokens */
.status-indicator {
    display: inline-block;
    width: var(--calcite-spacing-md);
    height: var(--calcite-spacing-md);
    border-radius: var(--calcite-corner-radius-pill); /* Use pill for circular elements */
    margin-right: var(--calcite-spacing-md);
}

.status-indicator.pending {
    background-color: var(--calcite-color-text-3);
}

.status-indicator.in_progress {
    background-color: var(--calcite-color-status-info);
    animation: pulse 2s infinite;
}

.status-indicator.completed {
    background-color: var(--calcite-color-status-success);
}

.status-indicator.cancelled {
    background-color: var(--calcite-color-status-danger);
}

@keyframes pulse {
    0%, 100% {
        opacity: var(--calcite-opacity-full); /* 1 */
    }
    50% {
        opacity: var(--calcite-opacity-half); /* 0.5 */
    }
}

/* Calcite components handle their own hover/focus states, 
   but we can add subtle enhancements for custom buttons */
button:not(calcite-button):hover:not(:disabled) {
    opacity: 0.9; /* No exact Calcite token for 0.9, using value directly */
    cursor: pointer;
}

/* Form focus effects using Calcite tokens */
input:focus,
textarea:focus,
select:focus {
    outline: none;
    box-shadow: 0 0 0 var(--calcite-border-width-md) var(--calcite-color-brand);
}

/* Loading spinner using Calcite tokens */
.spinner {
    border: var(--calcite-border-width-md) solid var(--calcite-color-foreground-1); /* 2px */
    border-top: var(--calcite-border-width-md) solid var(--calcite-color-brand);
    border-radius: var(--calcite-corner-radius-pill); /* Use pill for circular spinner */
    width: var(--calcite-spacing-lg);
    height: var(--calcite-spacing-lg);
    animation: spin 1s linear infinite;
}

@keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
}

/* Print styles */
@media print {
    nav, button, .no-print {
        display: none !important;
    }
    
    .todo-item {
        page-break-inside: avoid;
    }
}

/* View modes: Compact, Medium, Full */
/* Compact view uses Calcite Accordion for expandable items */
/* Medium view shows truncated descriptions */
/* Full view shows all details with two-column description layout */

/* Two-column description layout for full view */
.tt-desc-columns {
    column-count: var(--tt-desc-columns, 2);
    column-gap: var(--calcite-spacing-md);
    column-rule: 1px solid var(--calcite-color-border-1);
}

/* Ensure proper spacing in accordion items */
calcite-accordion-item .tt-todo-details-content {
    padding: var(--calcite-spacing-sm);
}

/* Medium view: truncated description styling */
.tt-todo-description-display {
    line-height: 1.6;
}

/* Loader visibility - hidden by default, shown when needed */
#app-loader {
    display: none;
}

#app-loader:not([hidden]) {
    display: block;
}

/* Clickable cards in main pane: provide consistent hover affordance (Calcite tokens) */
calcite-card.tt-hover-card {
    transition: box-shadow 0.15s ease, transform 0.15s ease;
}

calcite-card.tt-hover-card:hover {
    box-shadow: var(--calcite-shadow-sm);
    transform: translateY(calc(-1 * var(--calcite-spacing-px)));
}

/* Clickable table rows in main pane: cursor + subtle hover background */
calcite-table-row.tt-main-table-row,
calcite-table-row.tt-main-note-row {
    cursor: pointer;
}

calcite-table-row.tt-main-table-row:hover,
calcite-table-row.tt-main-note-row:hover {
    --calcite-table-row-background-color: var(--calcite-color-foreground-2);
}

/* Left pane: allow todo titles to wrap (undo truncation) */
.tt-browser-item-content {
    min-width: 0;
}

.tt-browser-item-title {
    white-space: normal;
    overflow: visible;
    text-overflow: unset;
    word-break: break-word;
}

.tt-browser-item-id {
    margin-inline-end: var(--calcite-spacing-xxs);
    font-weight: var(--calcite-font-weight-regular);
}

.tt-browser-item-desc {
    white-space: normal;
    overflow: visible;
    text-overflow: unset;
    word-break: break-word;
}

/* Left pane: status chip placement switches when panel is near its minimum width. */
.tt-browser-status-chip--top {
    display: none;
    margin-block-end: var(--calcite-spacing-xxs);
}

#tt-panel-start[data-tt-status-chips-top="true"] .tt-browser-status-chip--side {
    display: none;
}

#tt-panel-start[data-tt-status-chips-top="true"] .tt-browser-status-chip--top {
    display: inline-flex;
}

/* Description snippets: light gray background (#f5f5f5) */
/* Neutralize block element margins so container padding provides uniform spacing */
.markdown-render {
    background-color: var(--calcite-color-foreground-2);
    padding: var(--calcite-spacing-xs);
    border-radius: var(--calcite-corner-radius-sm);
    overflow:hidden;
}

/* Dark mode: use darker background for markdown-render */
body.calcite-mode-dark .markdown-render {
    background-color: var(--calcite-color-foreground-3);
}

.markdown-render p,
.markdown-render h1,
.markdown-render h2,
.markdown-render h3,
.markdown-render h4,
.markdown-render h5,
.markdown-render h6,
.markdown-render ul,
.markdown-render ol,
.markdown-render blockquote,
.markdown-render pre {
    margin: 0;
    padding: 0;
}

/* Ensure markdown-render text color adapts to theme */
.markdown-render,
.markdown-render * {
    color: inherit;
}

/* Markdown content (rendered HTML inside markdown-render) - use Calcite colors */
.markdown-content {
    color: var(--calcite-color-text-1);
}

body.calcite-mode-dark .markdown-content {
    color: var(--calcite-color-text-1);
}

.markdown-render > :first-child {
    margin-top: 0;
}

.markdown-render > :last-child {
    margin-bottom: 0;
}
