/* Custom styles for TodoTracker using Calcite Design Tokens */

/* Brand adjustments (user requested) */
:root {
    --calcite-color-brand: #224559;
}

/* Apply button internal background baseline (user requested) */
calcite-button {
    --calcite-internal-button-background-color: #3b505d;
}

/* -------------------------------------------------------------------------- */
/* Make Calcite controls feel like "application UI" (clear affordances)        */
/* - crisp 1px (non-blurred) shadows                                          */
/* - stronger separation between text and controls                             */
/* -------------------------------------------------------------------------- */

:root {
    --tt-crisp-shadow: 0 1px 0 0 rgba(0, 0, 0, 0.18);
}

body.calcite-mode-dark {
    --tt-crisp-shadow: 0 1px 0 0 rgba(0, 0, 0, 0.55);
}

/* Buttons: default raised feel (except fully transparent icon buttons) */
calcite-button {
    --calcite-button-shadow: var(--tt-crisp-shadow);
}

calcite-button[appearance="transparent"] {
    --calcite-button-shadow: var(--calcite-shadow-none);
}

/* Segmented control: crisp separation so it reads like tabs/buttons */
calcite-segmented-control-item {
    --calcite-segmented-control-shadow: var(--tt-crisp-shadow);
}

/* Inputs/selects/textareas: add crisp shadow and make them feel "field-like" */
calcite-input,
calcite-select,
calcite-text-area {
    --calcite-input-shadow: var(--tt-crisp-shadow);
    --calcite-input-corner-radius: var(--calcite-corner-radius-md);
}

/* Todo title should be bold everywhere (display + input fields) */
#titleInput,
calcite-input.tt-title-input,
calcite-input[data-role="titleInput"] {
    /* Calcite input internals use --calcite-font-weight-regular */
    --calcite-font-weight-regular: 700 !important;
    --calcite-input-text-color: var(--calcite-color-text-1);
}

.tt-title-display,
.tt-todo-title-display {
    font-weight: var(--calcite-font-weight-bold);
}

/* Main grid + list listings: bold title for clear hierarchy/affordance */
.tt-main-todo-title {
    font-weight: var(--calcite-font-weight-bold);
    color: var(--calcite-color-text-1);
}

.tt-main-list-content {
    display: flex;
    flex-direction: column;
    gap: var(--calcite-spacing-xxs);
}

/* Ensure Calcite Shell provides proper spacing and doesn't touch viewport */
calcite-shell {
    --calcite-shell-border-color: var(--calcite-color-border-1);
    height: 100vh;
    width: 100vw;
}

/* Ensure main content area has proper spacing */
calcite-shell main {
    /* Padding is handled by view containers; keep shell content flush. */
    padding: 0;
    overflow-y: auto;
}

/* -------------------------------------------------------------------------- */
/* Minimal utility classes used by SPA templates (Calcite-token based)         */
/* -------------------------------------------------------------------------- */

.flex { display: flex; }
.grid { display: grid; }
.block { display: block; }
.inline-block { display: inline-block; }
.flex-1 { flex: 1 1 0%; }
.flex-wrap { flex-wrap: wrap; }
.min-w-0 { min-width: 0; }

.items-center { align-items: center; }
.items-start { align-items: flex-start; }
.justify-between { justify-content: space-between; }
.justify-center { justify-content: center; }

.gap-1\.5 { gap: var(--calcite-spacing-sm); }
.gap-2 { gap: var(--calcite-spacing-sm); }
.gap-3 { gap: var(--calcite-spacing-md); }
.gap-4 { gap: var(--calcite-spacing-lg); }

.space-y-2 > * + * { margin-top: var(--calcite-spacing-sm); }
.space-y-3 > * + * { margin-top: var(--calcite-spacing-md); }
.space-y-4 > * + * { margin-top: var(--calcite-spacing-lg); }

.p-3 { padding: var(--calcite-spacing-md); }
.p-4 { padding: var(--calcite-spacing-lg); }
.p-6 { padding: var(--calcite-spacing-xl); }

.pt-2 { padding-top: var(--calcite-spacing-sm); }
.pt-3 { padding-top: var(--calcite-spacing-md); }
.py-4 { padding-top: var(--calcite-spacing-lg); padding-bottom: var(--calcite-spacing-lg); }
.py-12 { padding-top: calc(var(--calcite-spacing-xxl) * 2); padding-bottom: calc(var(--calcite-spacing-xxl) * 2); }

.mb-1 { margin-bottom: var(--calcite-spacing-xxs); }
.mb-2 { margin-bottom: var(--calcite-spacing-sm); }
.mb-3 { margin-bottom: var(--calcite-spacing-md); }
.mb-4 { margin-bottom: var(--calcite-spacing-lg); }
.mb-6 { margin-bottom: var(--calcite-spacing-xl); }
.mb-8 { margin-bottom: var(--calcite-spacing-xxl); }

.mt-1 { margin-top: var(--calcite-spacing-xxs); }
.mt-2 { margin-top: var(--calcite-spacing-sm); }
.mt-6 { margin-top: var(--calcite-spacing-xl); }

.text-center { text-align: center; }
.underline { text-decoration: underline; }
.cursor-pointer { cursor: pointer; }

.font-medium { font-weight: 500; }
.font-semibold { font-weight: 600; }
.font-bold { font-weight: 700; }

.text-xs { font-size: 0.75rem; line-height: 1rem; }
.text-sm { font-size: 0.875rem; line-height: 1.25rem; }
.text-lg { font-size: 1.125rem; line-height: 1.5rem; }
.text-xl { font-size: 1.25rem; line-height: 1.75rem; }
.text-2xl { font-size: 1.5rem; line-height: 2rem; }
.text-3xl { font-size: 1.875rem; line-height: 2.25rem; }

.truncate {
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
}

.border-t { border-top-width: 1px; border-top-style: solid; }
.border-color-1 { border-color: var(--calcite-color-border-1); }
.border-color-2 { border-color: var(--calcite-color-border-2); }
.border-color-3 { border-color: var(--calcite-color-border-3); }

.text-color-1 { color: var(--calcite-color-text-1); }
.text-color-2 { color: var(--calcite-color-text-2); }
.text-color-3 { color: var(--calcite-color-text-3); }
.text-color-danger { color: var(--calcite-color-status-danger); }
.text-muted-foreground { color: var(--calcite-color-text-2); }

/* Basic grid helpers used in templates */
.grid-cols-1 { grid-template-columns: repeat(1, minmax(0, 1fr)); }
.grid-cols-2 { grid-template-columns: repeat(2, minmax(0, 1fr)); }

@media (min-width: 768px) {
    .md\:grid-cols-3 { grid-template-columns: repeat(3, minmax(0, 1fr)); }
    .md\:grid-cols-4 { grid-template-columns: repeat(4, minmax(0, 1fr)); }
}

/* -------------------------------------------------------------------------- */
/* SPA-specific polish                                                        */
/* -------------------------------------------------------------------------- */

/* Navigation layout helpers (Calcite slots do most of the work; these are small tweaks). */
.tt-nav-actions {
    display: flex;
    align-items: center;
    gap: var(--calcite-spacing-md);
    flex-wrap: wrap;
    padding-inline-start: var(--calcite-spacing-md);
}

.tt-nav-secondary {
    display: flex;
    align-items: center;
    gap: var(--calcite-spacing-md);
    flex-wrap: wrap;
    padding-inline-start: var(--calcite-spacing-md);
}

.tt-nav-tabs,
#ttNavTabs,
#ttSpaNavTabs {
    display: flex;
    align-items: center;
    gap: var(--calcite-spacing-sm);
}

.tt-nav-tabs calcite-segmented-control,
#ttSpaNavTabs {
    --calcite-segmented-control-shadow: var(--tt-crisp-shadow);
}

.tt-nav-secondary calcite-input {
    width: 220px;
}

@media (max-width: 768px) {
    .tt-nav-secondary calcite-input {
        width: 160px;
    }
}

.tt-desktop-only { display: inline-flex; }
.tt-mobile-only { display: none; }

@media (max-width: 640px) {
    .tt-desktop-only { display: none !important; }
    .tt-mobile-only { display: inline-flex !important; }

    /* Let header controls stack cleanly on small screens */
    .tt-nav-actions {
        width: 100%;
        gap: var(--calcite-spacing-sm);
        padding-inline-start: var(--calcite-spacing-sm);
    }

    .tt-nav-secondary {
        width: 100%;
        gap: var(--calcite-spacing-sm);
        padding-inline-start: var(--calcite-spacing-sm);
    }

    .tt-nav-secondary calcite-input {
        width: 100%;
        min-width: 0;
    }

    #ttHeaderStatusSelect,
    #ttSpaNavSelect {
        width: 100%;
        min-width: 0;
    }
}

#tt-panel-start,
#tt-panel-end {
    height: 100%;
    overflow: auto;
}

/* Slightly differentiate the non-status "Queue" option inside the status segmented control */
calcite-segmented-control-item.tt-seg-queue {
    --calcite-segmented-control-border-color: var(--calcite-color-border-2);
    --calcite-segmented-control-icon-color: var(--calcite-color-brand);
}

calcite-segmented-control-item.tt-seg-queue[checked] {
    --calcite-segmented-control-background-color: var(--calcite-color-foreground-1);
    --calcite-segmented-control-border-color: var(--calcite-color-brand);
    --calcite-segmented-control-color: var(--calcite-color-brand);
    --calcite-segmented-control-shadow: inset 0 0 0 1px var(--calcite-color-brand);
}

/* Make the master-detail layout feel intentional on desktop (avoid huge empty center) */
#tt-panel-start-shell {
    --calcite-shell-panel-width: 360px;
}

#tt-panel-end-shell {
    --calcite-shell-panel-width: 440px;
}

@media (max-width: 768px) {
    #tt-panel-start-shell {
        --calcite-shell-panel-width: 100vw;
    }
    #tt-panel-end-shell {
        --calcite-shell-panel-width: 100vw;
    }
}

/* Left panel minimize rail (do not mutate list item internals; just hide overflow). */
#tt-panel-start-shell[data-tt-minimized="true"] {
    --calcite-shell-panel-width: 15pt;
    --calcite-shell-panel-min-width: 15pt;
    --calcite-shell-panel-max-width: 15pt;
}

#tt-panel-start-shell[data-tt-minimized="true"] #tt-panel-start {
    padding: 0;
    overflow: hidden;
}

#tt-panel-start-shell[data-tt-minimized="true"] #ttTodoBrowserList {
    display: none;
}

#tt-panel-start-shell[data-tt-minimized="true"] #ttLeftPanelToggleBtn {
    width: 15pt;
    min-width: 15pt;
    padding: 0;
}

.tt-surface {
    background: var(--calcite-color-foreground-1);
    border: 1px solid var(--calcite-color-border-1);
    border-radius: var(--calcite-corner-radius-md);
}

.status-pending { --calcite-chip-background-color: var(--calcite-color-foreground-2); }
.status-in_progress { --calcite-chip-background-color: var(--calcite-color-status-info); }
.status-completed { --calcite-chip-background-color: var(--calcite-color-status-success); }
.status-cancelled { --calcite-chip-background-color: var(--calcite-color-status-danger); }

/* Status chips: sharp corners + light text tinted by the same hue */
calcite-chip[class^="status-"],
calcite-chip[class*=" status-"] {
    --calcite-chip-corner-radius: 0px;
    /* safe default if color-mix isn't supported */
    --calcite-chip-text-color: var(--calcite-color-text-inverse);
}

/* Provide a hue token per status for tinting text */
.status-pending { --tt-status-hue: var(--calcite-color-text-3); }
.status-in_progress { --tt-status-hue: var(--calcite-color-status-info); }
.status-completed { --tt-status-hue: var(--calcite-color-status-success); }
.status-cancelled { --tt-status-hue: var(--calcite-color-status-danger); }

@supports (color: color-mix(in srgb, white, black)) {
    calcite-chip[class^="status-"]:not(.status-pending),
    calcite-chip[class*=" status-"]:not(.status-pending) {
        /* light, same-hue ink on dark-ish chip fills */
        --calcite-chip-text-color: color-mix(in srgb, var(--tt-status-hue) 18%, white);
    }
}

/* Pending is a light gray chip: text must be darker than the background */
calcite-chip.status-pending {
    --calcite-chip-text-color: var(--calcite-color-text-1);
}

/* Category + topic chips: sharp corners (status already covered above) */
calcite-chip[class^="category-"],
calcite-chip[class*=" category-"],
calcite-chip.tt-topic-chip {
    --calcite-chip-corner-radius: 0px;
}

.category-feature { --calcite-chip-background-color: var(--calcite-color-status-info); }
.category-issue { --calcite-chip-background-color: var(--calcite-color-status-warning); }
.category-bug { --calcite-chip-background-color: var(--calcite-color-status-danger); }

/* Detail view controls */
.tt-title-input {
    /* Calcite scale="l" does most of the work; this nudges toward ~1.5x feel. */
    font-size: 1.5em;
}

.tt-tags-input {
    /* Keep tags visually quieter/denser */
    --calcite-input-font-size: 0.875rem;
}

/* Smooth transitions - scoped to avoid interfering with Calcite components */
.todo-item,
.status-indicator,
.spinner {
    transition: all 0.2s ease-in-out;
}

/* Custom scrollbar using Calcite tokens */
/* Note: Scrollbar width uses fixed 8px for better UX visibility, 
   as Calcite spacing tokens are too small for scrollbars */
::-webkit-scrollbar {
    width: 8px;
}

::-webkit-scrollbar-track {
    background: var(--calcite-color-background);
}

::-webkit-scrollbar-thumb {
    background: var(--calcite-color-border-2);
    border-radius: var(--calcite-corner-radius-sm); /* Use sm (4px) for rounded scrollbar */
}

::-webkit-scrollbar-thumb:hover {
    background: var(--calcite-color-border-3);
}

/* Todo animations using Calcite spacing tokens */
.todo-item:hover {
    transform: translateX(var(--calcite-spacing-xxs)); /* 0.25rem = 4px */
}

/* Status indicators using Calcite color tokens */
.status-indicator {
    display: inline-block;
    width: var(--calcite-spacing-md);
    height: var(--calcite-spacing-md);
    border-radius: var(--calcite-corner-radius-pill); /* Use pill for circular elements */
    margin-right: var(--calcite-spacing-md);
}

.status-indicator.pending {
    background-color: var(--calcite-color-text-3);
}

.status-indicator.in_progress {
    background-color: var(--calcite-color-status-info);
    animation: pulse 2s infinite;
}

.status-indicator.completed {
    background-color: var(--calcite-color-status-success);
}

.status-indicator.cancelled {
    background-color: var(--calcite-color-status-danger);
}

@keyframes pulse {
    0%, 100% {
        opacity: var(--calcite-opacity-full); /* 1 */
    }
    50% {
        opacity: var(--calcite-opacity-half); /* 0.5 */
    }
}

/* Calcite components handle their own hover/focus states, 
   but we can add subtle enhancements for custom buttons */
button:not(calcite-button):hover:not(:disabled) {
    opacity: 0.9; /* No exact Calcite token for 0.9, using value directly */
    cursor: pointer;
}

/* Form focus effects using Calcite tokens */
input:focus,
textarea:focus,
select:focus {
    outline: none;
    box-shadow: 0 0 0 var(--calcite-border-width-md) var(--calcite-color-brand);
}

/* Loading spinner using Calcite tokens */
.spinner {
    border: var(--calcite-border-width-md) solid var(--calcite-color-foreground-1); /* 2px */
    border-top: var(--calcite-border-width-md) solid var(--calcite-color-brand);
    border-radius: var(--calcite-corner-radius-pill); /* Use pill for circular spinner */
    width: var(--calcite-spacing-lg);
    height: var(--calcite-spacing-lg);
    animation: spin 1s linear infinite;
}

@keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
}

/* Print styles */
@media print {
    nav, button, .no-print {
        display: none !important;
    }
    
    .todo-item {
        page-break-inside: avoid;
    }
}

/* View modes: Compact, Medium, Full */
/* Compact view uses Calcite Accordion for expandable items */
/* Medium view shows truncated descriptions */
/* Full view shows all details with two-column description layout */

/* Two-column description layout for full view */
.tt-desc-columns {
    column-count: var(--tt-desc-columns, 2);
    column-gap: var(--calcite-spacing-md);
    column-rule: 1px solid var(--calcite-color-border-1);
}

/* Ensure proper spacing in accordion items */
calcite-accordion-item .tt-todo-details-content {
    padding: var(--calcite-spacing-sm);
}

/* Medium view: truncated description styling */
.tt-todo-description-display {
    line-height: 1.6;
}

/* Loader visibility - hidden by default, shown when needed */
#app-loader {
    display: none;
}

#app-loader:not([hidden]) {
    display: block;
}
