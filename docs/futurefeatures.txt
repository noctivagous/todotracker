Here are some targeted suggestions to improve the **Agentic IDE Todo Tracker** based on our evolving specs (SQLite backend, hierarchical todos with categories, MCP for AI interaction, separate web UI for humans). I've grouped them by area, prioritizing high-impact additions that enhance agentic workflows, usability, and maintainability without overcomplicating the core.

### 1. Task Model Enhancements (Highest Priority)
   - **Add Priority & Effort Estimates**: Include `priority` (high/medium/low or 1-5) and `effort_estimate` (e.g., hours or story points) fields in the `todos` table. This helps the AI prioritize work and allows sorting/filtering in the UI. AI could auto-suggest estimates based on similar past tasks.
   - **Dependencies**: Add a many-to-many table for task dependencies (e.g., `todo_dependencies` with `todo_id` → `depends_on_id`). Blocks AI from starting a task until prerequisites are done, and UI can visualize with arrows or indent warnings.
   - **Due Dates & Reminders**: Add `due_date` field. For agentic use, the AI could flag overdue items in progress updates or auto-create "review overdue tasks" subtasks.
   - **Distinct Concern Type**: Instead of title prefix, add a `type` enum column (`task`, `subtask`, `concern`) or a boolean `is_concern`. Makes filtering easier (e.g., show only concerns in a sidebar).

### 2. AI / MCP Improvements
   - **More Granular Tools**: Add MCP tools like:
     - `prioritize_todos()` – AI reorders or assigns priorities based on project goals.
     - `breakdown_task(todo_id)` – AI suggests subtasks automatically.
     - `summarize_progress()` – Generates a project-wide status report.
   - **Rich Resources**: Expose dynamic resources like `todos/overdue`, `todos/by_category`, or `todos/search?query=...` for better context injection without tool calls.
   - **History/Versioning**: Add a `todo_history` table logging changes (who/what/when – "human" vs "AI"). MCP tool to fetch history helps AI reflect on past decisions.
   - **Mandatory Update Prompting**: In system prompts for the AI, reinforce: "After any work on a todo, always call `update_todo` with detailed progress_summary and remaining_work."

### 3. Web UI / UX Upgrades
   - **Real-time Collaboration**: Use WebSockets (e.g., FastAPI + Socket.IO) so human edits instantly reflect in AI context (and vice versa). Great for watching AI progress live.
   - **Markdown Everywhere**: Support markdown rendering in descriptions, progress_summary, remaining_work, and notes. Use a library like marked.js or React-Markdown.
   - **Advanced Views**:
     - Kanban board (columns: Todo / In Progress / Done / Blocked).
     - Timeline/Gantt for due dates and dependencies.
     - Search with filters (category, status, priority, text).
   - **Drag-and-Drop**: For reordering hierarchy and changing status.
   - **Dark Mode & Accessibility**: Default to dark theme (fits coding IDE vibe) and ensure keyboard navigation.

### 4. Project & Data Management
   - **Multiple Projects**: Add a `projects` table and `project_id` foreign key on todos/notes. UI switches between projects; MCP server scoped per project.
   - **Export/Import**: MCP tool + web endpoint for JSON export/import (or markdown). Useful for backups or migrating to tools like Notion/Obsidian.
   - **Attachments**: Simple file uploads linked to todos/notes (store paths or base64 in DB for small files). AI could reference uploaded specs/docs.

### 5. Agentic IDE Integrations
   - **Code Links**: Add fields for `file_path` and `line_number` in todos. MCP tool to open/edit files in the host IDE (if supported, like Cursor).
   - **Auto-Code Generation Tie-in**: When a todo is "feature" category, AI can propose code diffs in progress_summary.
   - **Cursor/Claude Desktop Compatibility**: Test with Cursor's MCP connector – many users run local MCP servers exactly for project management. Add a "recommended prompt library" resource with agentic templates (e.g., "You are a senior Python dev building this feature").

### Implementation Tips
- **Start Small**: Pick 2-3 from Task Model and one UI upgrade first – they'll deliver the most value.
- **Tech**: If using FastAPI for both MCP and web, share the DB layer to avoid concurrency issues (e.g., sqlite-wal mode).
- **Testing Agentic Flow**: Simulate AI runs with a simple script that connects via MCP and processes a todo end-to-end.

These keep the system lightweight while making it much more powerful for real AI-assisted development. Which area interests you most (e.g., task fields, MCP tools, UI), or do you want me to expand on any with code sketches?
